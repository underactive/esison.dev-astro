---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/HeaderCustom.astro';
import Footer from '../components/Footer.astro';

export interface Props {
	title: string;
	description: string;
}

const { title, description } = Astro.props;
---

<!doctype html>
<html lang="en" class="scroll-smooth">
	<head>
		<BaseHead title={title} description={description} />
		<script is:inline>
			// Theme toggle functionality
			const getThemePreference = () => {
				if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
					return localStorage.getItem('theme');
				}
				return 'dark'; // Default to dark mode for first-time visitors
			};
			
			const isDark = getThemePreference() === 'dark';
			document.documentElement.classList[isDark ? 'add' : 'remove']('dark');
			
			if (typeof localStorage !== 'undefined') {
				const observer = new MutationObserver(() => {
					const isDark = document.documentElement.classList.contains('dark');
					localStorage.setItem('theme', isDark ? 'dark' : 'light');
				});
				observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
			}
		</script>
	</head>
	<body class="min-h-screen bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 transition-colors duration-300">
		<Header />
		<main class="relative">
			<slot />
		</main>
		<Footer />
		
		<!-- Parallax background elements -->
		<div class="fixed inset-0 pointer-events-none overflow-hidden -z-10">
			<div class="parallax-bg absolute -top-1/2 -right-1/2 w-96 h-96 bg-gradient-to-br from-purple-400/20 to-purple-600/20 dark:from-purple-500/10 dark:to-purple-700/10 rounded-full blur-3xl animate-pulse"></div>
			<div class="parallax-bg absolute -bottom-1/2 -left-1/2 w-96 h-96 bg-gradient-to-tr from-purple-400/20 to-purple-600/20 dark:from-purple-500/10 dark:to-purple-700/10 rounded-full blur-3xl animate-pulse delay-1000"></div>
		</div>

		<style>
			.parallax-bg {
				animation: float 6s ease-in-out infinite;
			}
			
			@keyframes float {
				0%, 100% { transform: translateY(0px) rotate(0deg); }
				50% { transform: translateY(-20px) rotate(5deg); }
			}
		</style>

		<script>
			// Parallax scrolling effect
			window.addEventListener('scroll', () => {
				const scrolled = window.pageYOffset;
				const parallaxElements = document.querySelectorAll('.parallax-bg');
				const speed = 0.5;

				parallaxElements.forEach((element, index) => {
					const htmlElement = element as HTMLElement;
					const yPos = -(scrolled * speed * (index + 1));
					htmlElement.style.transform = `translateY(${yPos}px) rotate(${scrolled * 0.05}deg)`;
				});
			});

			// Theme toggle
			(window as any).toggleTheme = () => {
				document.documentElement.classList.toggle('dark');
			};
		</script>
	</body>
</html>
