---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import MainLayout from './MainLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<MainLayout title={title} description={description}>
	<article class="pt-20">
		<!-- Hero Image -->
		{heroImage && (
			<div class="w-full h-64 md:h-96 relative overflow-hidden">
				<Image 
					width={1200} 
					height={600} 
					src={heroImage} 
					alt="" 
					class="w-full h-full object-cover"
				/>
				<div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
			</div>
		)}
		
		<!-- Article Header -->
		<header class="container mx-auto px-6 py-12">
			<div class="max-w-4xl mx-auto text-center">
				<div class="mb-6">
					<time class="text-purple-600 dark:text-purple-400 font-medium">
						<FormattedDate date={pubDate} />
					</time>
					{updatedDate && (
						<div class="text-sm text-gray-500 dark:text-gray-400 mt-2">
							Last updated on <FormattedDate date={updatedDate} />
						</div>
					)}
				</div>
				<h1 class="text-4xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6 leading-tight">
					{title}
				</h1>
				<div class="w-24 h-1 bg-gradient-to-r from-purple-600 to-purple-800 mx-auto"></div>
			</div>
		</header>

		<!-- Article Content -->
		<main class="container mx-auto px-6 pb-20">
			<div class="max-w-4xl mx-auto">
				<div class="prose prose-lg prose-purple dark:prose-invert max-w-none
					prose-headings:text-gray-900 dark:prose-headings:text-white
					prose-p:text-gray-700 dark:prose-p:text-gray-300
					prose-a:text-purple-600 dark:prose-a:text-purple-400
					prose-strong:text-gray-900 dark:prose-strong:text-white
					prose-code:text-purple-600 dark:prose-code:text-purple-400
					prose-pre:bg-gray-100 dark:prose-pre:bg-gray-800
					prose-blockquote:border-purple-500 dark:prose-blockquote:border-purple-400
					prose-img:rounded-xl prose-img:shadow-lg">
					<slot />
				</div>
			</div>
		</main>

		<!-- Back to Blog Button -->
		<footer class="container mx-auto px-6 pb-20">
			<div class="max-w-4xl mx-auto text-center">
				<a 
					href="/blog" 
					class="inline-flex items-center px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-200 group"
				>
					<svg class="w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
					</svg>
					Back to Blog
				</a>
			</div>
		</footer>
	</article>
</MainLayout>
